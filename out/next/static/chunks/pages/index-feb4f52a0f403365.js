(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(6417)}])},6417:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var s=o(5893),r=o(7294),l=o(9008),n=o.n(l),a=o(5139),i=o.n(a);function c(e){let{workTime:t,shortBreakTime:o,longBreakTime:l,handleWorkTimeChange:n,handleShortBreakTimeChange:a,handleLongBreakTimeChange:c,saveSettings:u}=e,[m,d]=(0,r.useState)(""),[h,_]=(0,r.useState)([]);(0,r.useEffect)(()=>{chrome.storage.local.get("urlList",e=>{e.urlList&&_(e.urlList)})},[]);let g=e=>{let t=h.filter((t,o)=>o!==e);_(t),chrome.storage.local.set({urlList:t})};return(0,s.jsxs)("div",{className:i().settings,children:[(0,s.jsxs)("label",{className:i().label,children:["Work Time:",(0,s.jsx)("input",{type:"number",value:t,onChange:n})]}),(0,s.jsxs)("label",{className:i().label,children:["Short Break:",(0,s.jsx)("input",{type:"number",value:o,onChange:a})]}),(0,s.jsxs)("label",{className:i().label,children:["Long Break:",(0,s.jsx)("input",{type:"number",value:l,onChange:c})]}),(0,s.jsxs)("label",{className:i().label,children:["URL:",(0,s.jsx)("input",{type:"url",value:m,onChange:e=>d(e.target.value)}),(0,s.jsx)("button",{className:i().controlButton,onClick:()=>{if(m){let e=[...h,m.split(".")[1]];_(e),d(""),chrome.storage.local.set({urlList:e})}},children:"Add URL"})]}),(0,s.jsxs)("div",{className:i().urlList,children:[(0,s.jsx)("h3",{children:"Stored URLs:"}),(0,s.jsx)("ul",{children:h.map((e,t)=>(0,s.jsxs)("li",{className:i().li,children:[e,(0,s.jsx)("button",{className:i().deleteButton,onClick:()=>g(t),children:"Delete"})]},t))})]}),(0,s.jsx)("button",{className:i().controlButton,onClick:()=>{chrome.storage.local.set({workTime:t,shortBreakTime:o,longBreakTime:l},()=>{console.log("Settings saved")}),u()},children:"Save"})]})}function u(){let[e,t]=(0,r.useState)(25),[o,l]=(0,r.useState)(0),[n,a]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[d,h]=(0,r.useState)(0),[_,g]=(0,r.useState)(25),[x,f]=(0,r.useState)(5),[j,S]=(0,r.useState)(15),[p,v]=(0,r.useState)(!1),[b,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{chrome.storage.local.get(["timerEnd","timerState"],function(e){if(e.timerState){let{isBreak:t,sessions:o,workTime:s,shortBreakTime:r,longBreakTime:l,isBlocked:n}=e.timerState;m(t),h(o),g(s),f(r),S(l),k(n)}if(e.timerEnd){let o=Math.max((e.timerEnd-Date.now())/1e3,0);t(Math.floor(o/60)),l(Math.floor(o%60)),a(o>0)}})},[]),(0,r.useEffect)(()=>{let e=null;return n?e=setInterval(()=>{B()},1e3):clearInterval(e),()=>clearInterval(e)},[n,o,e]),(0,r.useEffect)(()=>{n||E()},[_,x,j,u]),(0,r.useEffect)(()=>{N()},[b]);let N=()=>{let e={isBreak:u,sessions:d,workTime:_,shortBreakTime:x,longBreakTime:j,isBlocked:b};console.log("I am saving timer",e),chrome.storage.local.set({timerState:e})},B=()=>{0===o?0===e?C():(t(e-1),l(59)):l(o-1),N()},C=()=>{if(u)m(!1),E(),h(d+1);else{let e=d+1===4?60*j:60*x;t(Math.floor(e/60)),l(e%60),m(!0),L(e,!0)}N()},E=()=>{t(u?x:_),l(0),m(!1),N()},L=(e,t)=>{n||(a(!0),k(!0),chrome.runtime.sendMessage({type:"startAlarm",duration:e,isBreak:t})),t&&k(!1),N()};return(0,s.jsx)("div",{className:i().pomodoro,children:p?(0,s.jsx)(c,{workTime:_,shortBreakTime:x,longBreakTime:j,handleWorkTimeChange:e=>g(Number(e.target.value)),handleShortBreakTimeChange:e=>f(Number(e.target.value)),handleLongBreakTimeChange:e=>S(Number(e.target.value)),saveSettings:()=>{E(),h(0),chrome.runtime.sendMessage({type:"clearAlarm"}),chrome.storage.local.remove("timerEnd"),k(!1),a(!1),N(),v(!1)}}):(0,s.jsxs)("div",{className:i().timerScreen,children:[(0,s.jsx)("h1",{children:u?"Break Time":"Work Time"}),(0,s.jsxs)("div",{className:i().timer,children:[e,":",o<10?"0".concat(o):o]}),(0,s.jsxs)("div",{className:i().controls,children:[(0,s.jsx)("button",{className:i().controlButton,onClick:()=>{n?(a(!1),k(!1),console.log("isblocked",b),N(),chrome.runtime.sendMessage({type:"clearAlarm"})):L(60*e+o,u)},children:n?"Pause":"Start"}),(0,s.jsx)("button",{className:i().controlButton,onClick:()=>{a(!1),E(),h(0),chrome.runtime.sendMessage({type:"clearAlarm"}),chrome.storage.local.remove("timerEnd"),k(!1),N()},children:"Reset"})]}),(0,s.jsxs)("p",{children:["Session ",d+1,"/4"]}),(0,s.jsx)("button",{className:i().settingsButton,onClick:()=>v(!0),children:"Settings"})]})})}function m(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"Pomodoro App"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.png"})]}),(0,s.jsx)("main",{children:(0,s.jsx)(u,{})})]})}},5139:function(e){e.exports={pomodoro:"Pomodoro_pomodoro__A2Oe2",timerScreen:"Pomodoro_timerScreen__kqBXM",timer:"Pomodoro_timer__Ce1j6",timerButton:"Pomodoro_timerButton__aOSGu",controls:"Pomodoro_controls__MkMLL",controlButton:"Pomodoro_controlButton__rQL1z",settingsButton:"Pomodoro_settingsButton__wc9wJ",deleteButton:"Pomodoro_deleteButton__FdacI",urlList:"Pomodoro_urlList__yZc2e",settings:"Pomodoro_settings__D7Ezz",label:"Pomodoro_label__gz4xg"}},9008:function(e,t,o){e.exports=o(6665)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);